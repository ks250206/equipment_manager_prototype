# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

## ç›®çš„

è¨­å‚™äºˆç´„ã‚·ã‚¹ãƒ†ãƒ  - ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒ™ãƒ¼ã‚¹ã®è¨­å‚™äºˆç´„ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 

æœ¬ã‚·ã‚¹ãƒ†ãƒ ã¯ã€çµ„ç¹”å†…ã®è¨­å‚™ï¼ˆæ©Ÿå™¨ï¼‰ã‚’åŠ¹ç‡çš„ã«äºˆç´„ãƒ»ç®¡ç†ã™ã‚‹ãŸã‚ã®Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚å»ºç‰©â†’ãƒ•ãƒ­ã‚¢â†’éƒ¨å±‹â†’è¨­å‚™ã¨ã„ã†éšå±¤æ§‹é€ ã§è¨­å‚™ã‚’ç®¡ç†ã—ã€ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼UIã‚’é€šã˜ã¦ç›´æ„Ÿçš„ã«äºˆç´„ã‚’è¡Œã†ã“ã¨ãŒã§ãã¾ã™ã€‚

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãƒ»ãƒ©ã‚¤ãƒ–ãƒ©ãƒª

| æŠ€è¡“             | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | ç”¨é€”                                                     |
| ---------------- | ---------- | -------------------------------------------------------- |
| **Next.js**      | 16.0.3     | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ»ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ï¼ˆApp Routerï¼‰ |
| **React**        | 19.2.0     | UIãƒ©ã‚¤ãƒ–ãƒ©ãƒª                                             |
| **TypeScript**   | 5.x        | å‹å®‰å…¨ãªé–‹ç™ºè¨€èª                                         |
| **Tailwind CSS** | 4.x        | ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°                                             |
| **Shadcn/ui**    | -          | UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ©ã‚¤ãƒ–ãƒ©ãƒª                               |

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ»ORM

| æŠ€è¡“            | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | ç”¨é€”                               |
| --------------- | ---------- | ---------------------------------- |
| **PostgreSQL**  | -          | ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒŠãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹         |
| **Drizzle ORM** | 0.44.7     | TypeScript ORM                     |
| **Podman**      | -          | ã‚³ãƒ³ãƒ†ãƒŠãƒ©ãƒ³ã‚¿ã‚¤ãƒ ï¼ˆDockerã®ä»£æ›¿ï¼‰ |

### èªè¨¼ãƒ»ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³

| æŠ€è¡“           | ãƒãƒ¼ã‚¸ãƒ§ãƒ³    | ç”¨é€”                             |
| -------------- | ------------- | -------------------------------- |
| **Auth.js**    | 5.0.0-beta.30 | èªè¨¼ï¼ˆJWTæˆ¦ç•¥ï¼‰                  |
| **Zod**        | 4.1.12        | ã‚¹ã‚­ãƒ¼ãƒãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³           |
| **neverthrow** | 8.2.0         | Resultå‹ã«ã‚ˆã‚‹ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚° |

### ãã®ä»–

| æŠ€è¡“                   | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | ç”¨é€”                 |
| ---------------------- | ---------- | -------------------- |
| **react-big-calendar** | 1.19.4     | ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼UI         |
| **date-fns**           | 4.1.0      | æ—¥ä»˜æ“ä½œ             |
| **Vitest**             | 4.0.10     | ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ |

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯**Domain Driven Design (DDD)**ã¨**ãƒ¬ã‚¤ãƒ¤ãƒ¼ãƒ‰ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£**ã«åŸºã¥ã„ã¦æ§‹ç¯‰ã•ã‚Œã¦ã„ã¾ã™ã€‚

è©³ç´°ã¯ **[ARCHITECTURE.md](./ARCHITECTURE.md)** ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

### ãƒ¬ã‚¤ãƒ¤ãƒ¼æ§‹æˆ

- **Presentation Layer** (`src/app`, `src/components`) - UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã€ãƒšãƒ¼ã‚¸
- **Application Layer** (`src/application/actions`) - Server Actionsã€ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹
- **Domain Layer** (`src/domain/models`) - ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã€ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
- **Infrastructure Layer** (`src/infrastructure`) - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã€å¤–éƒ¨API

### ä¸»è¦ãªè¨­è¨ˆåŸå‰‡

- **ä¾å­˜æ€§é€†è»¢ã®åŸå‰‡ (DIP)**: ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã¯Domainå±¤ã§å®šç¾©ã€Infrastructureå±¤ã§å®Ÿè£…
- **ãƒªãƒã‚¸ãƒˆãƒªãƒ‘ã‚¿ãƒ¼ãƒ³**: ã™ã¹ã¦ã®ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹ã¯ãƒªãƒã‚¸ãƒˆãƒªçµŒç”±
- **Resultå‹**: `neverthrow`ã«ã‚ˆã‚‹å‹å®‰å…¨ãªã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

## é–‹ç™ºè¦ç´„

è©³ç´°ã¯ **[CODING_RULES.md](./CODING_RULES.md)** ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

### é‡è¦ãªåŸå‰‡

- **é–¢æ•°å‹ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°**: ã‚¯ãƒ©ã‚¹ã®ä½¿ç”¨ã‚’é¿ã‘ã€é–¢æ•°ã¨ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã‚’å„ªå…ˆ
- **Test Driven Development (TDD)**: Classical School (Detroit School) ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ
- **Resultå‹ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**: `neverthrow`ã®ä½¿ç”¨
- **Zodãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³**: ã™ã¹ã¦ã®å…¥åŠ›ã‚’ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
- **Podman**: Dockerã§ã¯ãªã Podman ã‚’ä½¿ç”¨

## ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«

### ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£éšå±¤æ§‹é€ 

æœ¬ã‚·ã‚¹ãƒ†ãƒ ã¯ä»¥ä¸‹ã®éšå±¤æ§‹é€ ã§ãƒ‡ãƒ¼ã‚¿ã‚’ç®¡ç†ã—ã¾ã™ï¼š

```mermaid
graph TD
    Building[Building<br/>å»ºç‰©] --> Floor[Floor<br/>ãƒ•ãƒ­ã‚¢]
    Floor --> Room[Room<br/>éƒ¨å±‹]
    Room --> Equipment[Equipment<br/>è¨­å‚™]
    User[User<br/>ãƒ¦ãƒ¼ã‚¶ãƒ¼] -.äºˆç´„.-> Reservation[Reservation<br/>äºˆç´„]
    Equipment -.äºˆç´„å¯¾è±¡.-> Reservation

    style Building fill:#ffcccc
    style Floor fill:#ffddcc
    style Room fill:#ffeecc
    style Equipment fill:#ffffcc
    style User fill:#ccffcc
    style Reservation fill:#ccccff
```

### ä¸»è¦ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£

#### 1. **Userï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰**

ãƒ•ã‚¡ã‚¤ãƒ«: [`src/domain/models/User/User.ts`](../src/domain/models/User/User.ts)

```typescript
type User = {
  readonly id: UserId; // UUID
  readonly email: UserEmail; // ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ï¼ˆãƒ­ã‚°ã‚¤ãƒ³IDï¼‰
  readonly name: string | null; // åå‰
  readonly displayName: string | null; // è¡¨ç¤ºå
  readonly avatarUrl: string | null; // ã‚¢ãƒã‚¿ãƒ¼ç”»åƒURL
  readonly phoneNumber: string | null; // é›»è©±ç•ªå·
  readonly department: string | null; // éƒ¨ç½²
  readonly role: UserRole; // 'GENERAL' | 'EDITOR' | 'ADMIN'
  readonly passwordHash: string; // ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒãƒƒã‚·ãƒ¥
};

type UserRole = "GENERAL" | "EDITOR" | "ADMIN";
```

**æ©Ÿèƒ½ï¼š**

- JWTèªè¨¼ã«ã‚ˆã‚‹ãƒ­ã‚°ã‚¤ãƒ³
- ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç·¨é›†ï¼ˆè¡¨ç¤ºåã€ã‚¢ãƒã‚¿ãƒ¼ã€é›»è©±ç•ªå·ã€éƒ¨ç½²ï¼‰
- ãƒ­ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹ã®ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ï¼ˆGENERALã€EDITORã€ADMINï¼‰
- è£…ç½®ã®ç®¡ç†è€…ãƒ»å‰¯ç®¡ç†è€…ã¨ã—ã¦ã®æ¨©é™
- ã‚½ãƒ•ãƒˆãƒ‡ãƒªãƒ¼ãƒˆæ©Ÿèƒ½ï¼ˆè«–ç†å‰Šé™¤ï¼‰
- ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¤‰æ›´å¿…é ˆãƒ•ãƒ©ã‚°ï¼ˆåˆå›ãƒ­ã‚°ã‚¤ãƒ³æ™‚ã®å¼·åˆ¶ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¤‰æ›´ï¼‰
- ãŠæ°—ã«å…¥ã‚Šè£…ç½®ã®ç™»éŒ²ãƒ»ç®¡ç†

**ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒã®è¿½åŠ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼š**

- `mustChangePassword`: ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¤‰æ›´å¿…é ˆãƒ•ãƒ©ã‚°ï¼ˆ'true' ã¾ãŸã¯ 'false' ã®æ–‡å­—åˆ—ï¼‰
- `deletedAt`: ã‚½ãƒ•ãƒˆãƒ‡ãƒªãƒ¼ãƒˆã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ï¼ˆè«–ç†å‰Šé™¤æ—¥æ™‚ï¼‰

#### 2. **Buildingï¼ˆå»ºç‰©ï¼‰**

ãƒ•ã‚¡ã‚¤ãƒ«: [`src/domain/models/Building/Building.ts`](../src/domain/models/Building/Building.ts)

```typescript
type Building = {
  readonly id: BuildingId; // UUID
  readonly name: BuildingName; // å»ºç‰©åï¼ˆå¿…é ˆï¼‰
  readonly address: string | null; // ä½æ‰€
};
```

#### 3. **Floorï¼ˆãƒ•ãƒ­ã‚¢ï¼‰**

ãƒ•ã‚¡ã‚¤ãƒ«: [`src/domain/models/Floor/Floor.ts`](../src/domain/models/Floor/Floor.ts)

```typescript
type Floor = {
  readonly id: FloorId; // UUID
  readonly name: FloorName; // ãƒ•ãƒ­ã‚¢åï¼ˆå¿…é ˆï¼‰
  readonly buildingId: BuildingId; // æ‰€å±å»ºç‰©ID
  readonly floorNumber: number | null; // éšæ•°
};
```

#### 4. **Roomï¼ˆéƒ¨å±‹ï¼‰**

ãƒ•ã‚¡ã‚¤ãƒ«: [`src/domain/models/Room/Room.ts`](../src/domain/models/Room/Room.ts)

```typescript
type Room = {
  readonly id: RoomId; // UUID
  readonly name: RoomName; // éƒ¨å±‹åï¼ˆå¿…é ˆï¼‰
  readonly floorId: FloorId; // æ‰€å±ãƒ•ãƒ­ã‚¢ID
  readonly capacity: number | null; // åå®¹äººæ•°
};
```

#### 5. **Equipmentï¼ˆè¨­å‚™ï¼‰**

ãƒ•ã‚¡ã‚¤ãƒ«: [`src/domain/models/Equipment/Equipment.ts`](../src/domain/models/Equipment/Equipment.ts)

```typescript
type Equipment = {
  readonly id: EquipmentId; // UUID
  readonly name: EquipmentName; // è¨­å‚™åï¼ˆå¿…é ˆï¼‰
  readonly description: string | null; // èª¬æ˜
  readonly categoryMajor: string | null; // å¤§åˆ†é¡
  readonly categoryMinor: string | null; // å°åˆ†é¡
  readonly roomId: RoomId | null; // æ‰€å±éƒ¨å±‹ID
  readonly runningState: EquipmentRunningState; // ç¨¼åƒçŠ¶æ…‹
  readonly installationDate: Date | null; // å°å…¥æ™‚æœŸ
  readonly administratorId: UserId | null; // ç®¡ç†è€…ID
  readonly viceAdministratorIds: UserId[]; // å‰¯ç®¡ç†è€…IDãƒªã‚¹ãƒˆ
  // è¡¨ç¤ºç”¨ã®æ‹¡å¼µæƒ…å ±
  readonly administrator?: {
    id: UserId;
    name: string | null;
  };
  readonly viceAdministrators?: {
    id: UserId;
    name: string | null;
  }[];
  readonly location?: {
    buildingName: string;
    floorName: string;
    roomName: string;
  };
};

type EquipmentRunningState =
  | "OPERATIONAL"
  | "MAINTENANCE"
  | "OUT_OF_SERVICE"
  | "RETIRED";
```

**æ©Ÿèƒ½ï¼š**

- ç¨¼åƒçŠ¶æ…‹ç®¡ç†ï¼ˆç¨¼åƒä¸­ã€ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ä¸­ã€åœæ­¢ä¸­ã€å»ƒæ­¢ï¼‰
- å°å…¥æ™‚æœŸã®è¨˜éŒ²
- ç®¡ç†è€…ãƒ»å‰¯ç®¡ç†è€…ã®è¨­å®š
- ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹å±¥æ­´ã®è¨˜éŒ²
- ã‚³ãƒ¡ãƒ³ãƒˆæ©Ÿèƒ½

#### 6. **Reservationï¼ˆäºˆç´„ï¼‰**

ãƒ•ã‚¡ã‚¤ãƒ«: [`src/domain/models/Reservation/Reservation.ts`](../src/domain/models/Reservation/Reservation.ts)

```typescript
type Reservation = {
  readonly id: ReservationId; // UUID
  readonly startTime: Date; // é–‹å§‹æ™‚åˆ»
  readonly endTime: Date; // çµ‚äº†æ™‚åˆ»
  readonly comment: string | null; // ã‚³ãƒ¡ãƒ³ãƒˆ
  readonly userId: UserId; // äºˆç´„è€…ID
  readonly equipmentId: EquipmentId; // è¨­å‚™ID
  // è¡¨ç¤ºç”¨ã®æ‹¡å¼µæƒ…å ±
  readonly booker?: {
    id: UserId;
    name: string | null;
  };
  readonly equipment?: {
    id: EquipmentId;
    name: string;
  };
};
```

**ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«ï¼š**

- é–‹å§‹æ™‚åˆ»ã¯çµ‚äº†æ™‚åˆ»ã‚ˆã‚Šå‰ã§ãªã‘ã‚Œã°ãªã‚‰ãªã„
- åŒä¸€è¨­å‚™ã®åŒä¸€æ™‚é–“å¸¯ã«é‡è¤‡äºˆç´„ã¯ä¸å¯
- äºˆç´„è€…æœ¬äººã®ã¿ãŒäºˆç´„ã®ç·¨é›†ãƒ»å‰Šé™¤ãŒå¯èƒ½

#### 7. **EquipmentCategoryï¼ˆè¨­å‚™ã‚«ãƒ†ã‚´ãƒªï¼‰**

ãƒ•ã‚¡ã‚¤ãƒ«: [`src/domain/models/EquipmentCategory/EquipmentCategory.ts`](../src/domain/models/EquipmentCategory/EquipmentCategory.ts)

```typescript
type EquipmentCategory = {
  readonly id: EquipmentCategoryId; // UUID
  readonly categoryMajor: string; // å¤§åˆ†é¡ï¼ˆå¿…é ˆï¼‰
  readonly categoryMinor: string; // å°åˆ†é¡ï¼ˆå¿…é ˆï¼‰
};
```

#### 8. **SystemSettingsï¼ˆã‚·ã‚¹ãƒ†ãƒ è¨­å®šï¼‰**

ãƒ•ã‚¡ã‚¤ãƒ«: [`src/domain/models/SystemSettings/SystemSettings.ts`](../src/domain/models/SystemSettings/SystemSettings.ts)

```typescript
type SystemSetting = {
  id: string; // UUID
  key: string; // è¨­å®šã‚­ãƒ¼
  value: string; // è¨­å®šå€¤
  updatedAt: Date; // æ›´æ–°æ—¥æ™‚
  updatedBy?: string | null; // æ›´æ–°è€…ID
};
```

**æ©Ÿèƒ½ï¼š**

- ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®è¨­å®šã‚’ç®¡ç†
- ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³è¨­å®šï¼ˆ`timezone` ã‚­ãƒ¼ï¼‰
- ç®¡ç†è€…ã®ã¿ãŒè¨­å®šã‚’å¤‰æ›´å¯èƒ½

### ãƒ•ã‚¡ã‚¯ãƒˆãƒªé–¢æ•°ã¨ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³

å„ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã¯ã€Zodã‚¹ã‚­ãƒ¼ãƒã«ã‚ˆã‚‹ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å«ã‚€ãƒ•ã‚¡ã‚¯ãƒˆãƒªé–¢æ•°ã§ç”Ÿæˆã•ã‚Œã¾ã™ï¼š

```typescript
// ä¾‹: Building
export const createBuilding = (
  id: string,
  name: string,
  address: string | null = null,
): Result<Building, BuildingError> => {
  const idResult = BuildingIdSchema.safeParse(id);
  if (!idResult.success) return err(new BuildingError("Invalid Building ID"));

  const nameResult = BuildingNameSchema.safeParse(name);
  if (!nameResult.success)
    return err(new BuildingError("Invalid Building Name"));

  return ok({
    id: idResult.data,
    name: nameResult.data,
    address,
  });
};
```

**ç‰¹å¾´ï¼š**

- `neverthrow`ã®`Result`å‹ã«ã‚ˆã‚‹å‹å®‰å…¨ãªã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- Zodã‚¹ã‚­ãƒ¼ãƒã«ã‚ˆã‚‹å®Ÿè¡Œæ™‚ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
- ã‚¤ãƒŸãƒ¥ãƒ¼ã‚¿ãƒ–ãƒ«ãªãƒ‡ãƒ¼ã‚¿æ§‹é€ 

## ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒ

ãƒ•ã‚¡ã‚¤ãƒ«: [`src/infrastructure/database/schema.ts`](../src/infrastructure/database/schema.ts)

### ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹é€ 

```mermaid
erDiagram
    users ||--o{ reservations : "äºˆç´„ã™ã‚‹"
    users ||--o{ equipment : "ç®¡ç†ã™ã‚‹"
    users ||--o{ equipment_vice_administrators : "å‰¯ç®¡ç†ã™ã‚‹"
    users ||--o{ maintenance_records : "å®Ÿæ–½ã™ã‚‹"
    users ||--o{ equipment_comments : "ã‚³ãƒ¡ãƒ³ãƒˆã™ã‚‹"
    users ||--o{ user_favorite_equipments : "ãŠæ°—ã«å…¥ã‚Šç™»éŒ²ã™ã‚‹"
    users ||--o{ system_settings : "è¨­å®šã‚’æ›´æ–°ã™ã‚‹"
    buildings ||--o{ floors : "å«ã‚€"
    floors ||--o{ rooms : "å«ã‚€"
    rooms ||--o{ equipment : "é…ç½®ã•ã‚Œã‚‹"
    equipment ||--o{ reservations : "äºˆç´„ã•ã‚Œã‚‹"
    equipment ||--o{ equipment_vice_administrators : "å‰¯ç®¡ç†è€…ã‚’æŒã¤"
    equipment ||--o{ maintenance_records : "ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹è¨˜éŒ²ã‚’æŒã¤"
    equipment ||--o{ equipment_comments : "ã‚³ãƒ¡ãƒ³ãƒˆã‚’æŒã¤"
    equipment ||--o{ user_favorite_equipments : "ãŠæ°—ã«å…¥ã‚Šç™»éŒ²ã•ã‚Œã‚‹"
    equipment_categories ||--o{ equipment : "åˆ†é¡ã™ã‚‹"

    users {
        uuid id PK
        text email UK
        text password
        text name
        text display_name
        text avatar_url
        text phone_number
        text department
        text role
        text must_change_password
        timestamp deleted_at
    }

    buildings {
        uuid id PK
        text name
        text address
    }

    floors {
        uuid id PK
        text name
        uuid building_id FK
        integer floor_number
    }

    rooms {
        uuid id PK
        text name
        uuid floor_id FK
        integer capacity
    }

    equipment {
        uuid id PK
        text name
        text description
        text category_major
        text category_minor
        uuid room_id FK
        text running_state
        timestamp installation_date
        uuid administrator_id FK
    }

    equipment_vice_administrators {
        uuid equipment_id FK
        uuid user_id FK
    }

    maintenance_records {
        uuid id PK
        uuid equipment_id FK
        timestamp record_date
        text description
        integer cost
        uuid performed_by FK
    }

    equipment_comments {
        uuid id PK
        uuid equipment_id FK
        uuid user_id FK
        text content
        timestamp created_at
    }

    equipment_categories {
        uuid id PK
        text category_major
        text category_minor
    }

    reservations {
        uuid id PK
        timestamp start_time
        timestamp end_time
        text comment
        uuid user_id FK
        uuid equipment_id FK
    }

    user_favorite_equipments {
        uuid user_id FK
        uuid equipment_id FK
        timestamp created_at
    }

    system_settings {
        uuid id PK
        text key UK
        text value
        timestamp updated_at
        uuid updated_by FK
    }
```

## ãƒªãƒã‚¸ãƒˆãƒªãƒ‘ã‚¿ãƒ¼ãƒ³

### ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å®šç¾©

å„ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã«å¯¾ã—ã¦ã€Domainå±¤ã§ãƒªãƒã‚¸ãƒˆãƒªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’å®šç¾©ï¼š

**ä¾‹: `IEquipmentRepository`**

ãƒ•ã‚¡ã‚¤ãƒ«: [`src/domain/models/Equipment/IEquipmentRepository.ts`](../src/domain/models/Equipment/IEquipmentRepository.ts)

```typescript
export interface IEquipmentRepository {
  findAll(): Promise<Result<Equipment[], RepositoryError>>;
  findById(id: string): Promise<Result<Equipment | null, RepositoryError>>;
  findByRoomId(roomId: string): Promise<Result<Equipment[], RepositoryError>>;
  save(equipment: Equipment): Promise<Result<void, RepositoryError>>;
  delete(id: string): Promise<Result<void, RepositoryError>>;
}
```

### å®Ÿè£…

Infrastructureå±¤ã§Drizzle ORMã‚’ä½¿ç”¨ã—ãŸå®Ÿè£…ã‚’æä¾›ï¼š

**å®Ÿè£…æ¸ˆã¿ãƒªãƒã‚¸ãƒˆãƒªï¼š**

| ãƒªãƒã‚¸ãƒˆãƒª                           | ãƒ•ã‚¡ã‚¤ãƒ«                                                                                                                                                                                     | ãƒ†ã‚¹ãƒˆ |
| ------------------------------------ | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------ |
| `DrizzleBuildingRepository`          | [DrizzleBuildingRepository.ts](../src/infrastructure/repositories/DrizzleBuildingRepository.ts)                   | âœ…     |
| `DrizzleFloorRepository`             | [DrizzleFloorRepository.ts](../src/infrastructure/repositories/DrizzleFloorRepository.ts)                         | âœ…     |
| `DrizzleRoomRepository`              | [DrizzleRoomRepository.ts](../src/infrastructure/repositories/DrizzleRoomRepository.ts)                           | âœ…     |
| `DrizzleEquipmentRepository`         | [DrizzleEquipmentRepository.ts](../src/infrastructure/repositories/DrizzleEquipmentRepository.ts)                 | âœ…     |
| `DrizzleEquipmentCategoryRepository` | [DrizzleEquipmentCategoryRepository.ts](../src/infrastructure/repositories/DrizzleEquipmentCategoryRepository.ts) | âœ…     |
| `DrizzleReservationRepository`       | [DrizzleReservationRepository.ts](../src/infrastructure/repositories/DrizzleReservationRepository.ts)             | âœ…     |
| `DrizzleUserRepository`              | [DrizzleUserRepository.ts](../src/infrastructure/repositories/DrizzleUserRepository.ts)                           | âœ…     |

**ç‰¹å¾´ï¼š**

- ã™ã¹ã¦ã®ãƒªãƒã‚¸ãƒˆãƒªã«å¯¾ã—ã¦ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã‚’å®Ÿè£…æ¸ˆã¿
- Resultå‹ã«ã‚ˆã‚‹å‹å®‰å…¨ãªã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- Drizzle ORMã«ã‚ˆã‚‹å‹å®‰å…¨ãªã‚¯ã‚¨ãƒª

## ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±¤ï¼ˆServer Actionsï¼‰

Next.js 16ã®Server Actionsã‚’ä½¿ç”¨ã—ã¦ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ã‚¸ãƒƒã‚¯ã‚’å®Ÿè£…ï¼š

### ä¸»è¦ãªServer Actions

#### èªè¨¼é–¢é€£

- ãƒ­ã‚°ã‚¤ãƒ³ãƒ»ãƒ­ã‚°ã‚¢ã‚¦ãƒˆå‡¦ç†
- ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ï¼ˆJWTï¼‰

#### ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†

ãƒ•ã‚¡ã‚¤ãƒ«: [`src/application/actions/user.ts`](../src/application/actions/user.ts)

- `getCurrentUserAction` - ç¾åœ¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±å–å¾—
- `updateUserProfileAction` - ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æ›´æ–°
- `getAllUsersAction` - å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§å–å¾—ï¼ˆç®¡ç†è€…ç”¨ï¼‰
- `createUserAction` - ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆï¼ˆç®¡ç†è€…ç”¨ï¼‰
- `updateUserRoleAction` - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ­ãƒ¼ãƒ«æ›´æ–°ï¼ˆç®¡ç†è€…ç”¨ï¼‰
- `deleteUserAction` - ãƒ¦ãƒ¼ã‚¶ãƒ¼å‰Šé™¤ï¼ˆã‚½ãƒ•ãƒˆãƒ‡ãƒªãƒ¼ãƒˆã€ç®¡ç†è€…ç”¨ï¼‰
- `changePasswordAction` - ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¤‰æ›´

#### å»ºç‰©ãƒ»ãƒ•ãƒ­ã‚¢ãƒ»éƒ¨å±‹ç®¡ç†

ãƒ•ã‚¡ã‚¤ãƒ«: [`src/application/actions/building.ts`](../src/application/actions/building.ts), [`floor.ts`](../src/application/actions/floor.ts), [`room.ts`](../src/application/actions/room.ts)

- CRUDæ“ä½œï¼ˆä½œæˆã€èª­ã¿å–ã‚Šã€æ›´æ–°ã€å‰Šé™¤ï¼‰
- éšå±¤æ§‹é€ ã«åŸºã¥ãæ¤œç´¢

#### è¨­å‚™ç®¡ç†

ãƒ•ã‚¡ã‚¤ãƒ«: [`src/application/actions/equipment.ts`](../src/application/actions/equipment.ts)

- `createEquipmentAction` - è¨­å‚™ä½œæˆ
- `updateEquipmentAction` - è¨­å‚™æ›´æ–°
- `updateEquipmentManagementAction` - ç®¡ç†è€…ãƒ»å‰¯ç®¡ç†è€…ã®æ›´æ–°
- `deleteEquipmentAction` - è¨­å‚™å‰Šé™¤
- `getEquipmentByIdAction` - è¨­å‚™è©³ç´°å–å¾—
- éƒ¨å±‹åˆ¥è¨­å‚™ä¸€è¦§å–å¾—

ãƒ•ã‚¡ã‚¤ãƒ«: [`src/application/actions/maintenanceRecord.ts`](../src/application/actions/maintenanceRecord.ts)

- ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹å±¥æ­´ã®CRUDæ“ä½œ

ãƒ•ã‚¡ã‚¤ãƒ«: [`src/application/actions/equipmentComment.ts`](../src/application/actions/equipmentComment.ts)

- è£…ç½®ã‚³ãƒ¡ãƒ³ãƒˆã®CRUDæ“ä½œ

#### ãŠæ°—ã«å…¥ã‚Šç®¡ç†

ãƒ•ã‚¡ã‚¤ãƒ«: [`src/application/actions/favorite.ts`](../src/application/actions/favorite.ts)

- `toggleFavoriteAction` - ãŠæ°—ã«å…¥ã‚Šè£…ç½®ã®è¿½åŠ ãƒ»å‰Šé™¤
- `getFavoritesAction` - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãŠæ°—ã«å…¥ã‚Šè£…ç½®ä¸€è¦§å–å¾—

#### ã‚·ã‚¹ãƒ†ãƒ è¨­å®šç®¡ç†

ãƒ•ã‚¡ã‚¤ãƒ«: [`src/application/actions/settings.ts`](../src/application/actions/settings.ts)

- `getTimezoneAction` - ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³è¨­å®šå–å¾—
- `updateTimezoneAction` - ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³è¨­å®šæ›´æ–°ï¼ˆç®¡ç†è€…ç”¨ï¼‰

#### ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰

ãƒ•ã‚¡ã‚¤ãƒ«: [`src/application/actions/dashboard.ts`](../src/application/actions/dashboard.ts)

- `getDashboardStatsAction` - ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰çµ±è¨ˆæƒ…å ±å–å¾—ï¼ˆå»ºç‰©æ•°ã€è£…ç½®æ•°ã€ã‚¢ã‚¯ãƒ†ã‚£ãƒ–äºˆç´„æ•°ã€æœ€è¿‘ã®äºˆç´„ã€ãŠæ°—ã«å…¥ã‚Šè£…ç½®ã€æœ€è¿‘ä½¿ç”¨ã—ãŸè£…ç½®ï¼‰

#### äºˆç´„ç®¡ç†

ãƒ•ã‚¡ã‚¤ãƒ«: [`src/application/actions/reservation.ts`](../src/application/actions/reservation.ts)

- `createReservationAction` - äºˆç´„ä½œæˆï¼ˆé‡è¤‡ãƒã‚§ãƒƒã‚¯å«ã‚€ï¼‰
- `updateReservationAction` - äºˆç´„æ›´æ–°ï¼ˆæ¨©é™ãƒã‚§ãƒƒã‚¯å«ã‚€ï¼‰
- `deleteReservationAction` - äºˆç´„å‰Šé™¤ï¼ˆæ¨©é™ãƒã‚§ãƒƒã‚¯å«ã‚€ï¼‰
- `getReservations` - äºˆç´„ä¸€è¦§å–å¾—
- `getReservationById` - äºˆç´„è©³ç´°å–å¾—

**ç‰¹å¾´ï¼š**

- Zodã‚¹ã‚­ãƒ¼ãƒã«ã‚ˆã‚‹å…¥åŠ›ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
- èªè¨¼ãƒ»èªå¯ãƒã‚§ãƒƒã‚¯
- ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«ã®æ¤œè¨¼ï¼ˆäºˆç´„ã®é‡è¤‡ãƒã‚§ãƒƒã‚¯ãªã©ï¼‰
- `revalidatePath`ã«ã‚ˆã‚‹è‡ªå‹•ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ›´æ–°

## ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³å±¤ï¼ˆUIï¼‰

### ãƒšãƒ¼ã‚¸æ§‹æˆ

```
/                          - ãƒ©ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ãƒšãƒ¼ã‚¸
/login                     - ãƒ­ã‚°ã‚¤ãƒ³ãƒšãƒ¼ã‚¸
/dashboard                 - ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ï¼ˆçµ±è¨ˆã€ãŠæ°—ã«å…¥ã‚Šã€æœ€è¿‘ã®äºˆç´„ï¼‰
/reservations              - äºˆç´„ç®¡ç†ï¼ˆã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã€è£…ç½®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ï¼‰
/equipments                - è¨­å‚™ä¸€è¦§
/equipments/[id]           - è¨­å‚™è©³ç´°ï¼ˆç¨¼åƒçŠ¶æ…‹ã€ç®¡ç†è€…ã€ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹å±¥æ­´ã€ã‚³ãƒ¡ãƒ³ãƒˆï¼‰
/buildings                 - å»ºç‰©ä¸€è¦§
/buildings/[id]            - å»ºç‰©è©³ç´°ï¼ˆãƒ•ãƒ­ã‚¢ä¸€è¦§ï¼‰
/buildings/[id]/floors/[floorId]           - ãƒ•ãƒ­ã‚¢è©³ç´°ï¼ˆéƒ¨å±‹ä¸€è¦§ï¼‰
/buildings/[id]/floors/[floorId]/rooms/[roomId]  - éƒ¨å±‹è©³ç´°ï¼ˆè¨­å‚™ä¸€è¦§ï¼‰
/categories                - ã‚«ãƒ†ã‚´ãƒªç®¡ç†
/profile                   - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«
/change-password           - ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¤‰æ›´
/users                     - ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ï¼ˆç®¡ç†è€…å°‚ç”¨ï¼‰
/settings                  - ã‚·ã‚¹ãƒ†ãƒ è¨­å®šï¼ˆç®¡ç†è€…å°‚ç”¨ï¼‰
```

### ä¸»è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

#### ç®¡ç†ç³»ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

| ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ       | ãƒ•ã‚¡ã‚¤ãƒ«                                                                                                                                                  | æ©Ÿèƒ½               |
| -------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------ |
| `BuildingManager`    | [BuildingManager.tsx](../src/components/building/BuildingManager.tsx)          | å»ºç‰©ã®CRUDæ“ä½œUI       |
| `FloorManager`       | [FloorManager.tsx](../src/components/floor/FloorManager.tsx)                   | ãƒ•ãƒ­ã‚¢ã®CRUDæ“ä½œUI     |
| `RoomManager`        | [RoomManager.tsx](../src/components/room/RoomManager.tsx)                      | éƒ¨å±‹ã®CRUDæ“ä½œUI       |
| `EquipmentManager`   | [EquipmentManager.tsx](../src/components/equipment/EquipmentManager.tsx)       | è¨­å‚™ã®CRUDæ“ä½œUI       |
| `CategoryManager`    | [CategoryManager.tsx](../src/components/equipment/CategoryManager.tsx)          | ã‚«ãƒ†ã‚´ãƒªã®CRUDæ“ä½œUI   |
| `ReservationManager` | [ReservationManager.tsx](../src/components/reservation/ReservationManager.tsx) | äºˆç´„ã®CRUDæ“ä½œUI       |
| `UserProfileManager` | [UserProfileManager.tsx](../src/components/user/UserProfileManager.tsx)        | ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç·¨é›†UI     |
| `UserManager`        | [UserManager.tsx](../src/components/user/UserManager.tsx)                      | ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†UIï¼ˆç®¡ç†è€…ç”¨ï¼‰ |

#### ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

| ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ      | ãƒ•ã‚¡ã‚¤ãƒ«                                                                                                                                             | æ©Ÿèƒ½                                       |
| ------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------ |
| `EquipmentCalendar` | [EquipmentCalendar.tsx](../src/components/calendar/EquipmentCalendar.tsx) | react-big-calendarã‚’ä½¿ç”¨ã—ãŸäºˆç´„ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ |

#### ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³

| ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ | ãƒ•ã‚¡ã‚¤ãƒ«                                                                                                                        | æ©Ÿèƒ½                                 |
| -------------- | ------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------ |
| `Breadcrumbs`  | [Breadcrumbs.tsx](../src/components/Breadcrumbs.tsx) | ãƒ‘ãƒ³ããšãƒªã‚¹ãƒˆï¼ˆéšå±¤ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰ |

**ç‰¹å¾´ï¼š**

- Shadcn/uiã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®æ´»ç”¨
- React Hook Formã«ã‚ˆã‚‹ãƒ•ã‚©ãƒ¼ãƒ ç®¡ç†
- Server Actionsã¨ã®çµ±åˆ
- æ¥½è¦³çš„UIæ›´æ–°

## é–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

### ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash
# ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®èµ·å‹•ï¼ˆPodmanï¼‰
npm run db:up

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒã®ãƒ—ãƒƒã‚·ãƒ¥
npm run db:push

# ã‚·ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿ã®æŠ•å…¥
npm run db:seed

# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•
npm run dev
```

### åˆ©ç”¨å¯èƒ½ãªã‚¹ã‚¯ãƒªãƒ—ãƒˆ

| ã‚³ãƒãƒ³ãƒ‰           | èª¬æ˜                                     |
| ------------------ | ---------------------------------------- |
| `npm run dev`      | é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹• (http://localhost:3000) |
| `npm run build`    | ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ãƒ“ãƒ«ãƒ‰                     |
| `npm run start`    | ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ã‚µãƒ¼ãƒãƒ¼èµ·å‹•               |
| `npm run lint`     | ESLintã«ã‚ˆã‚‹ã‚³ãƒ¼ãƒ‰æ¤œè¨¼                   |
| `npm run lint:fix` | ESLint + Prettierã«ã‚ˆã‚‹è‡ªå‹•ä¿®æ­£          |
| `npm run format`   | Prettierã«ã‚ˆã‚‹ã‚³ãƒ¼ãƒ‰æ•´å½¢                 |
| `npm run check`    | TypeScriptã®å‹ãƒã‚§ãƒƒã‚¯                   |
| `npm test`         | Vitestã«ã‚ˆã‚‹ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ                   |
| `npm run db:up`    | Podmanã§ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹èµ·å‹•                 |
| `npm run db:down`  | Podmanã§ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åœæ­¢                 |
| `npm run db:push`  | Drizzleã‚¹ã‚­ãƒ¼ãƒã‚’ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ãƒ—ãƒƒã‚·ãƒ¥  |
| `npm run db:seed`  | ã‚·ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿æŠ•å…¥                         |

### ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

**ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯:** Vitest

**ãƒ†ã‚¹ãƒˆå¯¾è±¡:**

- âœ… Domainå±¤: ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆãƒªé–¢æ•°ã¨ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
- âœ… Infrastructureå±¤: å…¨ãƒªãƒã‚¸ãƒˆãƒªã®å®Ÿè£…ï¼ˆCRUDæ“ä½œï¼‰
- ğŸš§ Applicationå±¤: Server Actionsï¼ˆä»Šå¾Œè¿½åŠ äºˆå®šï¼‰
- ğŸš§ Presentationå±¤: UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆä»Šå¾Œè¿½åŠ äºˆå®šï¼‰

**ãƒ†ã‚¹ãƒˆã‚¢ãƒ—ãƒ­ãƒ¼ãƒ:** Classical School (Detroit School) TDD

è©³ç´°ã¯ **[CODING_RULES.md](./CODING_RULES.md)** ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

## ä¸»è¦æ©Ÿèƒ½

### 1. èªè¨¼ãƒ»èªå¯

- âœ… ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ãƒ»ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã«ã‚ˆã‚‹ãƒ­ã‚°ã‚¤ãƒ³
- âœ… JWTæˆ¦ç•¥ã«ã‚ˆã‚‹èªè¨¼
- âœ… ãƒ­ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ï¼ˆGENERAL/EDITOR/ADMINï¼‰
- âœ… è£…ç½®å›ºæœ‰ã®æ¨©é™ç®¡ç†ï¼ˆç®¡ç†è€…ãƒ»å‰¯ç®¡ç†è€…ï¼‰
- âœ… ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†
- âœ… åˆå›ãƒ­ã‚°ã‚¤ãƒ³æ™‚ã®å¼·åˆ¶ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¤‰æ›´

### 2. ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†

- âœ… ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«è¡¨ç¤º
- âœ… ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç·¨é›†ï¼ˆè¡¨ç¤ºåã€ã‚¢ãƒã‚¿ãƒ¼ã€é›»è©±ç•ªå·ã€éƒ¨ç½²ï¼‰
- âœ… ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¤‰æ›´æ©Ÿèƒ½
- âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§è¡¨ç¤ºï¼ˆç®¡ç†è€…å°‚ç”¨ï¼‰
- âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆï¼ˆç®¡ç†è€…å°‚ç”¨ï¼‰
- âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ­ãƒ¼ãƒ«å¤‰æ›´ï¼ˆç®¡ç†è€…å°‚ç”¨ï¼‰
- âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼å‰Šé™¤ï¼ˆã‚½ãƒ•ãƒˆãƒ‡ãƒªãƒ¼ãƒˆã€ç®¡ç†è€…å°‚ç”¨ï¼‰

### 3. éšå±¤æ§‹é€ ç®¡ç†

- âœ… å»ºç‰©ã®CRUDæ“ä½œ
- âœ… ãƒ•ãƒ­ã‚¢ã®CRUDæ“ä½œï¼ˆå»ºç‰©ã«ç´ã¥ãï¼‰
- âœ… éƒ¨å±‹ã®CRUDæ“ä½œï¼ˆãƒ•ãƒ­ã‚¢ã«ç´ã¥ãï¼‰
- âœ… è¨­å‚™ã®CRUDæ“ä½œï¼ˆéƒ¨å±‹ã«ç´ã¥ãï¼‰
- âœ… ãƒ‘ãƒ³ããšãƒªã‚¹ãƒˆã«ã‚ˆã‚‹éšå±¤ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³

### 4. è¨­å‚™ç®¡ç†

- âœ… è¨­å‚™ã®ç™»éŒ²ãƒ»ç·¨é›†ãƒ»å‰Šé™¤
- âœ… ã‚«ãƒ†ã‚´ãƒªåˆ†é¡ï¼ˆå¤§åˆ†é¡ãƒ»å°åˆ†é¡ï¼‰
- âœ… éƒ¨å±‹ã¸ã®é…ç½®
- âœ… è¨­å‚™è©³ç´°è¡¨ç¤º
- âœ… ç¨¼åƒçŠ¶æ…‹ç®¡ç†ï¼ˆç¨¼åƒä¸­ã€ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ä¸­ã€åœæ­¢ä¸­ã€å»ƒæ­¢ï¼‰
- âœ… å°å…¥æ™‚æœŸã®è¨˜éŒ²
- âœ… ç®¡ç†è€…ãƒ»å‰¯ç®¡ç†è€…ã®è¨­å®š
- âœ… ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹å±¥æ­´ã®è¨˜éŒ²
- âœ… ã‚³ãƒ¡ãƒ³ãƒˆæ©Ÿèƒ½
- âœ… è£…ç½®å›ºæœ‰ã®æ¨©é™ç®¡ç†ï¼ˆç®¡ç†è€…ãƒ»å‰¯ç®¡ç†è€…ã®ã¿ç·¨é›†å¯èƒ½ï¼‰

### 5. äºˆç´„ç®¡ç†

- âœ… ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼UIã«ã‚ˆã‚‹äºˆç´„è¡¨ç¤º
- âœ… äºˆç´„ã®ä½œæˆãƒ»ç·¨é›†ãƒ»å‰Šé™¤
- âœ… é‡è¤‡äºˆç´„ã®é˜²æ­¢
- âœ… äºˆç´„è€…æƒ…å ±ã®è¡¨ç¤º
- âœ… ã‚³ãƒ¡ãƒ³ãƒˆæ©Ÿèƒ½
- âœ… æ¨©é™ãƒã‚§ãƒƒã‚¯ï¼ˆè‡ªåˆ†ã®äºˆç´„ã®ã¿ç·¨é›†ãƒ»å‰Šé™¤å¯èƒ½ï¼‰
- âœ… è£…ç½®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ©Ÿèƒ½ï¼ˆãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã«ã‚ˆã‚‹è¤‡æ•°é¸æŠï¼‰
- âœ… ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã•ã‚ŒãŸè£…ç½®ä¸€è¦§ã®è¡¨ç¤º
- âœ… æŠ˜ã‚ŠãŸãŸã¿å¯èƒ½ãªè£…ç½®ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼

### 6. ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼æ©Ÿèƒ½

- âœ… react-big-calendarã«ã‚ˆã‚‹æœˆæ¬¡ãƒ»é€±æ¬¡ãƒ»æ—¥æ¬¡ãƒ“ãƒ¥ãƒ¼
- âœ… è¨­å‚™åˆ¥ã®äºˆç´„è¡¨ç¤º
- âœ… äºˆç´„è©³ç´°ã®ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—è¡¨ç¤º
- âœ… ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‹ã‚‰ã®ç›´æ¥äºˆç´„ä½œæˆ
- âœ… ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³å¯¾å¿œï¼ˆã‚·ã‚¹ãƒ†ãƒ è¨­å®šã§å¤‰æ›´å¯èƒ½ï¼‰

### 7. ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰

- âœ… çµ±è¨ˆæƒ…å ±ã®è¡¨ç¤ºï¼ˆå»ºç‰©æ•°ã€è£…ç½®æ•°ã€ã‚¢ã‚¯ãƒ†ã‚£ãƒ–äºˆç´„æ•°ï¼‰
- âœ… ãŠæ°—ã«å…¥ã‚Šè£…ç½®ã®è¡¨ç¤º
- âœ… æœ€è¿‘ä½¿ç”¨ã—ãŸè£…ç½®ã®è¡¨ç¤º
- âœ… æœ€è¿‘ã®äºˆç´„ä¸€è¦§ã®è¡¨ç¤º

### 8. ãŠæ°—ã«å…¥ã‚Šæ©Ÿèƒ½

- âœ… è£…ç½®ã‚’ãŠæ°—ã«å…¥ã‚Šã«ç™»éŒ²ãƒ»è§£é™¤
- âœ… ãŠæ°—ã«å…¥ã‚Šè£…ç½®ä¸€è¦§ã®è¡¨ç¤ºï¼ˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ï¼‰
- âœ… è£…ç½®è©³ç´°ãƒšãƒ¼ã‚¸ã§ã®ãŠæ°—ã«å…¥ã‚Šãƒˆã‚°ãƒ«ãƒœã‚¿ãƒ³

### 9. ã‚·ã‚¹ãƒ†ãƒ è¨­å®š

- âœ… ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³è¨­å®šï¼ˆç®¡ç†è€…å°‚ç”¨ï¼‰
- âœ… ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®è¨­å®šç®¡ç†
- âœ… è¨­å®šå¤‰æ›´å±¥æ­´ã®è¨˜éŒ²

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ

```
eq/
â”œâ”€â”€ docs/                          # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ ARCHITECTURE.md           # ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£åŸå‰‡
â”‚   â”œâ”€â”€ CODING_RULES.md           # ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„
â”‚   â””â”€â”€ PROJECT_SUMMARY.md        # æœ¬ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â”œâ”€â”€ drizzle/                       # Drizzleãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
â”œâ”€â”€ public/                        # é™çš„ãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/                       # Next.js App Router
â”‚   â”‚   â”œâ”€â”€ (auth)/               # èªè¨¼ãƒšãƒ¼ã‚¸ã‚°ãƒ«ãƒ¼ãƒ—
â”‚   â”‚   â”‚   â””â”€â”€ login/
â”‚   â”‚   â”œâ”€â”€ (dashboard)/          # ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãƒšãƒ¼ã‚¸ã‚°ãƒ«ãƒ¼ãƒ—
â”‚   â”‚   â”‚   â”œâ”€â”€ buildings/        # å»ºç‰©ç®¡ç†
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ [id]/         # å»ºç‰©è©³ç´°
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ floors/
â”‚   â”‚   â”‚   â”‚           â””â”€â”€ [floorId]/
â”‚   â”‚   â”‚   â”‚               â””â”€â”€ rooms/
â”‚   â”‚   â”‚   â”‚                   â””â”€â”€ [roomId]/
â”‚   â”‚   â”‚   â”œâ”€â”€ categories/       # ã‚«ãƒ†ã‚´ãƒªç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ change-password/  # ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¤‰æ›´
â”‚   â”‚   â”‚   â”œâ”€â”€ dashboard/        # ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
â”‚   â”‚   â”‚   â”œâ”€â”€ equipments/       # è¨­å‚™ä¸€è¦§ãƒ»è©³ç´°
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ [id]/         # è¨­å‚™è©³ç´°
â”‚   â”‚   â”‚   â”œâ”€â”€ profile/          # ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«
â”‚   â”‚   â”‚   â”œâ”€â”€ reservations/     # äºˆç´„ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ settings/         # ã‚·ã‚¹ãƒ†ãƒ è¨­å®š
â”‚   â”‚   â”‚   â””â”€â”€ users/            # ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ layout.tsx
â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”œâ”€â”€ application/               # Applicationå±¤
â”‚   â”‚   â””â”€â”€ actions/              # Server Actions
â”‚   â”‚       â”œâ”€â”€ building.ts
â”‚   â”‚       â”œâ”€â”€ dashboard.ts
â”‚   â”‚       â”œâ”€â”€ equipment.ts
â”‚   â”‚       â”œâ”€â”€ equipmentCategory.ts
â”‚   â”‚       â”œâ”€â”€ equipmentComment.ts
â”‚   â”‚       â”œâ”€â”€ favorite.ts
â”‚   â”‚       â”œâ”€â”€ floor.ts
â”‚   â”‚       â”œâ”€â”€ maintenanceRecord.ts
â”‚   â”‚       â”œâ”€â”€ reservation.ts
â”‚   â”‚       â”œâ”€â”€ room.ts
â”‚   â”‚       â”œâ”€â”€ settings.ts
â”‚   â”‚       â””â”€â”€ user.ts
â”‚   â”œâ”€â”€ components/                # UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ building/
â”‚   â”‚   â”œâ”€â”€ calendar/
â”‚   â”‚   â”œâ”€â”€ equipment/
â”‚   â”‚   â”œâ”€â”€ floor/
â”‚   â”‚   â”œâ”€â”€ reservation/
â”‚   â”‚   â”œâ”€â”€ room/
â”‚   â”‚   â”œâ”€â”€ ui/                   # Shadcn/ui
â”‚   â”‚   â””â”€â”€ user/
â”‚   â”œâ”€â”€ domain/                    # Domainå±¤
â”‚   â”‚   â”œâ”€â”€ models/               # ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«
â”‚   â”‚   â”‚   â”œâ”€â”€ Building/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Building.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Building.test.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ IBuildingRepository.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ Equipment/
â”‚   â”‚   â”‚   â”œâ”€â”€ EquipmentCategory/
â”‚   â”‚   â”‚   â”œâ”€â”€ EquipmentComment/
â”‚   â”‚   â”‚   â”œâ”€â”€ Floor/
â”‚   â”‚   â”‚   â”œâ”€â”€ MaintenanceRecord/
â”‚   â”‚   â”‚   â”œâ”€â”€ Reservation/
â”‚   â”‚   â”‚   â”œâ”€â”€ Room/
â”‚   â”‚   â”‚   â”œâ”€â”€ SystemSettings/
â”‚   â”‚   â”‚   â””â”€â”€ User/
â”‚   â”‚   â””â”€â”€ services/             # ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚µãƒ¼ãƒ“ã‚¹
â”‚   â”‚       â””â”€â”€ PermissionService.ts  # æ¨©é™ãƒã‚§ãƒƒã‚¯ã‚µãƒ¼ãƒ“ã‚¹
â”‚   â”œâ”€â”€ infrastructure/            # Infrastructureå±¤
â”‚   â”‚   â”œâ”€â”€ database/
â”‚   â”‚   â”‚   â”œâ”€â”€ drizzle.ts        # Drizzleè¨­å®š
â”‚   â”‚   â”‚   â””â”€â”€ schema.ts         # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒ
â”‚   â”‚   â””â”€â”€ repositories/         # ãƒªãƒã‚¸ãƒˆãƒªå®Ÿè£…
â”‚   â”‚       â”œâ”€â”€ DrizzleBuildingRepository.ts
â”‚   â”‚       â”œâ”€â”€ DrizzleBuildingRepository.test.ts
â”‚   â”‚       â”œâ”€â”€ DrizzleEquipmentRepository.ts
â”‚   â”‚       â”œâ”€â”€ DrizzleEquipmentRepository.test.ts
â”‚   â”‚       â””â”€â”€ ...
â”‚   â”œâ”€â”€ lib/                       # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚   â”‚   â”œâ”€â”€ seed.ts               # ã‚·ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿
â”‚   â”‚   â””â”€â”€ utils.ts
â”‚   â”œâ”€â”€ auth.config.ts            # Auth.jsè¨­å®š
â”‚   â”œâ”€â”€ auth.ts                   # Auth.js
â”‚   â””â”€â”€ middleware.ts             # Next.js Middleware
â”œâ”€â”€ .env                           # ç’°å¢ƒå¤‰æ•°
â”œâ”€â”€ compose.yml                    # Podman Composeè¨­å®š
â”œâ”€â”€ drizzle.config.ts             # Drizzleè¨­å®š
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â””â”€â”€ vitest.config.ts              # Vitestè¨­å®š
```

## ä»Šå¾Œã®æ‹¡å¼µäºˆå®š

### ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ã®å‘ä¸Š

- Applicationå±¤ã®Server Actionsã®ãƒ†ã‚¹ãƒˆ
- Presentationå±¤ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ†ã‚¹ãƒˆ
- E2Eãƒ†ã‚¹ãƒˆã®è¿½åŠ 

### æ©Ÿèƒ½æ‹¡å¼µ

- é€šçŸ¥æ©Ÿèƒ½ï¼ˆäºˆç´„ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ï¼‰
- äºˆç´„ã®å®šæœŸäºˆç´„æ©Ÿèƒ½
- è¨­å‚™ã®åˆ©ç”¨çµ±è¨ˆãƒ»ãƒ¬ãƒãƒ¼ãƒˆ
- ç®¡ç†è€…å‘ã‘ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
- è¨­å‚™ã®ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹è¨˜éŒ²

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®æœ€é©åŒ–
- ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥ã®æ”¹å–„
- ç”»åƒã®æœ€é©åŒ–

## å‚è€ƒè³‡æ–™

### å¤–éƒ¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [Next.js Documentation](https://nextjs.org/docs)
- [Drizzle ORM Documentation](https://orm.drizzle.team/)
- [Auth.js Documentation](https://authjs.dev/)
- [Zod Documentation](https://zod.dev/)
- [neverthrow Documentation](https://github.com/supermacro/neverthrow)
- [react-big-calendar](https://jquense.github.io/react-big-calendar/)

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [ARCHITECTURE.md](./ARCHITECTURE.md)
- [CODING_RULES.md](./CODING_RULES.md)
